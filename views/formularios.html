<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro de Alumnos</title>
    <link rel="stylesheet" href="/style.css" />
    <!-- Ruta corregida para el CSS -->
    <style>
      /* Reseteo y configuración básica */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box; /* Asegura que el padding y el border se incluyan en el ancho total del elemento */
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
        font-size: 16px; /* Tamaño base para fuentes */
      }

      header {
        background-color: #4caf50;
        color: white;
        padding: 1rem;
        text-align: center;
      }

      nav ul {
        list-style: none;
        padding: 0;
        text-align: center; /* Alinea la navegación al centro */
      }

      nav ul li {
        display: inline;
        margin-right: 10px;
      }

      nav a {
        color: white;
        text-decoration: none;
        font-weight: bold;
      }

      .acerca-de {
        padding: 2rem;
      }

      footer {
        background-color: #333;
        color: white;
        text-align: center;
        padding: 1rem;
        font-size: 1.5rem;
      }

      .social-icon {
        color: white;
        text-decoration: none;
        margin: 0 10px;
      }

      .container {
        width: 80%;
        margin: auto;
        overflow: hidden;
      }

      /* Estilos para el formulario */
      form {
        background: #fff;
        padding: 25px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }

      /* Etiquetas y campos de entrada */
      label {
        display: block;
        margin-top: 20px;
        font-size: 1.25rem; /* Ajustado a rem */
      }

      input[type="text"],
      input[type="number"] {
        width: 100%;
        padding: 15px;
        margin-top: 5px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 1.25rem; /* Ajustado a rem */
      }

      button {
        background: #28a745;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1.25rem; /* Ajustado a rem */
      }

      button:hover {
        background: #218838;
      }

      /* Media Queries */
      @media (max-width: 1024px) {
        body {
          font-size: 14px;
        }

        .container {
          width: 90%;
        }

        h1 {
          font-size: 1.5rem; /* Ajustado para pantallas más pequeñas */
        }

        form {
          padding: 1.5rem; /* Reducido padding para pantallas más pequeñas */
        }

        label,
        input[type="text"],
        input[type="number"],
        button {
          font-size: 1rem; /* Ajustado para mejor visualización */
        }
        footer {
  font-size: 0.8rem;
}
      }

      @media (max-width: 600px) {
        body {
          font-size: 12px;
        }

        .container {
          width: 95%;
        }

        h1 {
          font-size: 1.25rem; /* Ajustado para pantallas pequeñas */
        }

        form {
          padding: 1rem; /* Reducido padding para pantallas pequeñas */
        }

        label,
        input[type="text"],
        input[type="number"],
        button {
          font-size: 0.875rem; /* Ajustado para mejor visualización */
        }
        footer {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 2rem;
  font-size: 0.8rem;
}
      }
    </style>
  </head>
  <body>
    <header>
      <h1>C.E.M.G Héctor V. Medina</h1>
      <nav>
        <ul>
          <li><a href="/">Inicio</a></li>
          <li><a href="/acerca-de">Acerca de</a></li>
          <li>
            <a
              href="https://www.facebook.com/cemghector.v.medina.9"
              class="icon-facebook"
              >Facebook</a
            >
          </li>
        </ul>
      </nav>
    </header>
    <h1>Registro de Alumnos de Primer Ingreso</h1>
    <form id="student-form">
      <div>
        <label for="name">Nombre:</label>
        <input type="text" id="name" placeholder="Ej. Daniel Osias" required />
      </div>
      <div>
        <label for="lname">Apellido:</label>
        <input
          type="text"
          id="lname"
          placeholder="Ej. Cardina Montoya"
          required
        />
      </div>
      <div>
        <label for="muni">Municipio:</label>
        <input
          type="text"
          id="muni"
          placeholder="Ej. Valle de Ángeles"
          required
        />
      </div>
      <div>
        <label for="dept">Departamento:</label>
        <input type="text" id="dept" placeholder="Francisco Morazán" required />
      </div>
      <div>
        <label for="bar">Barrio:</label>
        <input type="text" id="bar" placeholder="Ej. La Zimbra" required />
      </div>
      <div>
        <label for="age">Edad:</label>
        <input type="number" id="age" placeholder="Ej. 15" required />
      </div>
      <div>
        <label for="grade">Grado:</label>
        <input type="text" id="grade" placeholder="Ej. Séptimo" required />
      </div>
      <div>
        <label for="secc">Sección:</label>
        <input type="number" id="secc" placeholder="Ej. 1" required />
      </div>
      <div>
        <label for="jorn">Jornada:</label>
        <input type="text" id="jorn" placeholder="Ej. Vespertina" required />
      </div>
      <button type="submit">Registrar</button>
    </form>
    <h2>Lista de Alumnos</h2>
    <ul id="student-list"></ul>

    <script>
      document
        .getElementById("student-form")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Evita el envío del formulario por defecto

          const formData = {
            name: document.getElementById("name").value,
            lname: document.getElementById("lname").value,
            muni: document.getElementById("muni").value,
            dept: document.getElementById("dept").value,
            bar: document.getElementById("bar").value,
            age: document.getElementById("age").value,
            grade: document.getElementById("grade").value,
            secc: document.getElementById("secc").value,
            jorn: document.getElementById("jorn").value,
          };

          fetch("/save-student", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(formData),
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                alert("Alumno registrado exitosamente");
                document.getElementById("student-form").reset();
                updateStudentList(); // Actualiza la lista de alumnos después de registrar
              } else {
                alert("Error al registrar alumno");
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Error al registrar alumno");
            });
        });

      function updateStudentList() {
        fetch("/students")
          .then((response) => response.json())
          .then((students) => {
            const studentList = document.getElementById("student-list");
            studentList.innerHTML = ""; // Limpiar lista existente
            students.forEach((student) => {
              const li = document.createElement("li");
              li.textContent = `Nombre: ${student.name}, Apellido: ${student.lname}, Municipio: ${student.muni}, Departamento: ${student.dept}, Barrio: ${student.bar}, Edad: ${student.age}, Grado: ${student.grade}, Sección: ${student.secc}, Jornada: ${student.jorn}`;
              studentList.appendChild(li);
            });
          });
      }

      // Llamar a la función para actualizar la lista cuando se carga la página
      updateStudentList();
    </script>
    <footer>
      <a href="https://www.facebook.com/cemghector.v.medina.9" class="social-icon">Facebook</a>
      <a href="https://twitter.com" class="social-icon">Twitter</a>
      <a href="https://instagram.com" class="social-icon">Instagram</a>
      <p>&copy; 2024 C.E.M.G Héctor V. Medina. Todos los derechos reservados.</p>
    </footer>
  </body>
</html>
